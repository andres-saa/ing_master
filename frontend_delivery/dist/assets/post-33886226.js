import{f as i}from"./fetchService-d0f0c0ab.js";import{b as o,d as f,U as p,p as g,r as u,o as r,c,e as a,a as d,q as m}from"./index-147646d1.js";const k={class:"m-auto my-7",style:{"max-width":"50rem",height:"60vh"}},w={style:{display:"flex",gap:"2rem"}},x={style:{display:"flex",gap:"2rem","justify-content":"center"}},b={style:{width:"100%","max-width":"25rem"}},$=a("h3",{style:{"text-transform":"uppercase","text-align":"center"},class:"my-4"},[a("b",null,"ACTUAL")],-1),U=["src"],V={key:0,style:{width:"100%"}},B=a("h3",{style:{"text-transform":"uppercase","text-align":"center"},class:"my-4"},[a("b",null,"Nuevo")],-1),E=["src"],R={__name:"post",setup(I){const n=o(""),l=o(""),s=o({link:""});f(async()=>{try{const t=await i.get(`${p}/last-post`);if(t.link){const e=new URL(t.link);e.pathname.includes("/reel/")?e.pathname=e.pathname.replace("/reel/","/p/"):e.pathname.includes("/p/")||(e.pathname=`/p${e.pathname}`),s.value.link=`${e.origin}${e.pathname}`}}catch(t){console.error("Error al obtener el enlace actual:",t)}}),g(n,t=>{if(t.includes("http")){const e=new URL(t);e.pathname.includes("/reel/")?e.pathname=e.pathname.replace("/reel/","/p/"):e.pathname.includes("/p/")||(e.pathname=`/p${e.pathname}`),l.value=`${e.origin}${e.pathname}`}else l.value=""});const h=async()=>{try{const t=await i.put(`${p}/update-last-post`,{link:l.value});console.log("Enlace enviado al servidor:",t),s.value.link=l.value,console.log("Enlace actual actualizado en la vista"),n.value="",l.value=""}catch(t){console.error("Error al enviar el enlace al servidor:",t)}};return(t,e)=>{const v=u("InputText"),_=u("Button");return r(),c("div",k,[a("div",w,[d(v,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=y=>n.value=y),placeholder:"Inserta aquí el link de tu último post de Instagram",style:{width:"100%"}},null,8,["modelValue"]),d(_,{onClick:h,severity:"help",style:{width:"30%"},label:"Realizar cambio"})]),a("div",x,[a("div",b,[$,s.value.link?(r(),c("iframe",{key:0,src:`${s.value.link}embed`,width:"100%",style:{height:"900px"},frameborder:"0",scrolling:"no",allowtransparency:"true"},`
                `,8,U)):m("",!0)]),l.value.includes("http")?(r(),c("div",V,[B,a("iframe",{src:`${l.value}embed`,width:"100%",style:{height:"900px"},frameborder:"0",scrolling:"no",allowtransparency:"true"},`
                `,8,E)])):m("",!0)])])}}};export{R as default};
