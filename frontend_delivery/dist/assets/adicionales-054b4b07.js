import{a as F}from"./aditionalService-ba6bda69.js";import{f as ne}from"./formatoPesos-2a38d2e7.js";import{_ as se,u as re,m as de,b as n,d as ue,p as j,r as y,o as _,c as b,a as l,w as a,e,F as H,k as pe,U as c,g as S,t as V,i as ce,q as M,y as me,z as ve,J as P}from"./index-147646d1.js";import{f as m}from"./fetchService-d0f0c0ab.js";const u=D=>(me("data-v-2f667715"),D=D(),ve(),D),ye={class:"py-3"},_e={style:{display:"flex","justify-content":"end",gap:"1rem"}},be={class:"py-3"},fe={style:{display:"flex","justify-content":"end",gap:"1rem"}},ge={class:"px-3",style:{}},he={class:"p-2 mx-auto",style:{"max-width":"540px",overflow:"hidden","background-color":"var(--primary-color)","border-bottom":"2px solid #00000050","border-radius":".5rem .5rem 0 0","box-shadow":"0 1rem 1rem #00000030",gap:"1rem",padding:"0 3rem",margin:"auto",display:"flex","justify-content":"space-between","align-items":"center"}},we=u(()=>e("p",{class:"text-center pl-3 text-xl p-0 m-0",style:{"font-weight":"bold",width:"min-content",color:"white",gap:"1rem","align-items":"center"}}," ADICIONES ",-1)),xe={style:{display:"flex",gap:".5rem","align-items":"center"}},ke=u(()=>e("h6",{class:"m-0 text-white p-0"},"|",-1)),Ce={class:"my-1 px-2",style:{display:"flex","justify-content":"space-between","align-items":"center",gap:"1rem"}},Ve={key:0,class:"pi pi-angle-up text-2xl"},De={key:1,class:"pi pi-angle-down text-2xl"},$e={class:"text-center text-xl m-0",style:{"font-weight":"bold","text-transform":"capitalize"}},Ae=u(()=>e("b",null,[e("i",{class:"pi pi-arrow-left"})],-1)),Ee={style:{display:"flex",gap:".5rem","justify-content":"end"}},Ne={key:0},Ge={class:"m-0",style:{"text-transform":"uppercase"}},Ie={key:0,class:"m-0",style:{"font-weight":"bold","text-align":"end"}},Ue={style:{display:"flex",gap:".5rem","justify-content":"end"}},je={class:"py-3"},Se={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Te=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),ze=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"precio")],-1)),Be={style:{display:"flex","justify-content":"end"}},Re={class:"py-3"},qe={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Le=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),Oe={style:{display:"flex","justify-content":"end"}},Fe={class:"py-3"},He={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Me=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Grupo")],-1)),Pe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),Je=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"precio")],-1)),Ke={style:{display:"flex","justify-content":"end"}},Qe={class:"py-3"},We={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Xe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),Ye={style:{display:"flex","justify-content":"end"}},Ze={__name:"adicionales",setup(D){const z=re(),B=de(),$=n({}),A=n({}),h=n(!1),E=n(!1),N=n(!1),w=n(!1),G=n(!1),x=n({}),I=n(!1),k=n({}),R=n([]),r=n({name:"",type_id:3,price:0}),C=n({name:""}),J=i=>{x.value=i,G.value=!0},q=()=>{G.value=!1,x.value={}},K=async()=>{if(!x.value.id){alert("ID de la adición no encontrado.");return}try{await m.delete(`${c}/delete_aditional/${x.value.id}`),q(),await v()}catch(i){console.error("Error al eliminar la adición:",i),alert("Hubo un error al eliminar la adición.")}},Q=i=>{k.value=i,I.value=!0},L=()=>{I.value=!1,k.value={}},W=async()=>{if(!k.value.type_id){alert("ID del grupo no encontrado.");return}try{await m.delete(`${c}/delete_aditional_category/${k.value.type_id}`),L(),await v()}catch(i){console.error("Error al eliminar el grupo de adiciones:",i),alert("Hubo un error al eliminar el grupo de adiciones.")}},X=async()=>{C.value.name||alert("El nombre del grupo es obligatorio"),await m.post(`${c}/create-aditional-category`,C.value),await v(),E.value=!1},Y=async()=>{var i;f.value.name||alert("El nombre del grupo es obligatorio"),await m.put(`${c}/update_aditional_category/${(i=f.value)==null?void 0:i.type_id}`,f.value),await v(),w.value=!1},Z=async()=>{var i;(!p.value.name||!p.value.price)&&alert("Llene todos los campos"),await m.put(`${c}/update_aditional_item/${(i=p.value)==null?void 0:i.id}`,p.value),await v(),N.value=!1},f=n({}),p=n({}),ee=i=>{p.value={...i},N.value=!0},te=i=>{f.value={...i},w.value=!0};n({});const oe=async()=>{(!r.value.name||!r.value.type_id)&&alert("nombre y tipo son obligatorios"),await m.post(`${c}/create-aditional-to-group`,r.value),await v(),h.value=!1},v=async()=>{$.value=await m.get(`${c}/all-aditional-registered-edit`),R.value=await m.get(`${c}/get-aditional-category-types`)};return ue(async()=>{await v()}),j(()=>B.path,async()=>{B.params.category_id&&($.value=await F.getAllAditions(),await P())},{deep:!0}),j(()=>z.site,async()=>{z.site&&($.value=await F.getAllAditions(),await P())},{deep:!0}),j(h,()=>{r.value={name:"",type_id:3,price:0}}),j(w,()=>{C.value={name:""}}),(i,o)=>{const s=y("Button"),g=y("Dialog"),T=y("Column"),le=y("DataTable"),U=y("InputText"),O=y("InputNumber"),ie=y("Dropdown");return _(),b(H,null,[l(g,{visible:G.value,"onUpdate:visible":o[0]||(o[0]=t=>G.value=t),header:"Confirmar Eliminación",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",_e,[l(s,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:q}),l(s,{label:"Eliminar",icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:K})])]),default:a(()=>[e("div",ye,[e("p",null,[S("¿Estás seguro de que deseas eliminar la adición "),e("b",null,V(x.value.name),1),S("?")])])]),_:1},8,["visible"]),l(g,{visible:I.value,"onUpdate:visible":o[1]||(o[1]=t=>I.value=t),header:"Confirmar Eliminación",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",fe,[l(s,{label:"Cancelar",icon:"pi pi-times",class:"p-button-text",onClick:L}),l(s,{label:"Eliminar",icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W})])]),default:a(()=>[e("div",be,[e("p",null,[S("¿Estás seguro de que deseas eliminar el grupo de adiciones "),e("b",null,V(k.value.name),1),S("?")])])]),_:1},8,["visible"]),e("div",ge,[e("div",he,[we,e("div",xe,[l(s,{onClick:o[2]||(o[2]=t=>h.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nueva adicion"}),ke,l(s,{onClick:o[3]||(o[3]=t=>E.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nuevo Grupo"})])])]),(_(!0),b(H,null,pe($.value,t=>(_(),b("div",{class:"m-auto col-12 m-0 p-0",style:{"max-width":"540px","box-shadow":"0 1rem 1rem #00000030",overflow:"hidden","border-bottom":"2px solid #00000050"},key:i.grupo},[e("div",Ce,[l(s,{onClick:d=>A.value[t.type_id]=!A.value[t.type_id],text:"",style:{color:"var(--primary-color)"}},{default:a(()=>[e("b",null,[A.value[t.type_id]?(_(),b("i",Ve)):(_(),b("i",De))])]),_:2},1032,["onClick"]),e("h6",$e,V(t==null?void 0:t.name),1),Ae,e("div",Ee,[l(s,{onClick:d=>te(t),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),l(s,{onClick:d=>Q(t),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:"pi pi-trash"},null,8,["onClick"])])]),A.value[t.type_id]?(_(),b("div",Ne,[l(le,{style:{"background-color":"white"},showGridlines:"",stripedRows:"",value:t.items},{default:a(()=>[l(T,{style:{"text-transform":"capitalize"},class:"p-0 px-2",field:"aditional_item_name",header:"NOMBRE"},{body:a(d=>[e("h6",Ge,V(d.data.name),1)]),_:1}),l(T,{class:"px-2",field:"aditional_item_price",header:"PRECIO",style:{"text-transform":"capitalize",display:"flex","justify-content":"center"}},{body:a(d=>[d.data.aditional_item_price!=0?(_(),b("h6",Ie,V(ce(ne)(d.data.price)),1)):M("",!0)]),_:1}),l(T,{style:{width:"2rem"},class:"p-0 py-1 pl-3 px-2",header:"Interactuar"},{body:a(d=>[e("div",Ue,[l(s,{onClick:ae=>ee(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),l(s,{onClick:ae=>J(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:"pi pi-trash"},null,8,["onClick"])])]),_:1})]),_:2},1032,["value"])])):M("",!0)]))),128)),l(g,{visible:N.value,"onUpdate:visible":o[7]||(o[7]=t=>N.value=t),header:"Editar adicion",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Be,[l(s,{onClick:o[6]||(o[6]=t=>Z()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",je,[e("div",Se,[Te,l(U,{modelValue:p.value.name,"onUpdate:modelValue":o[4]||(o[4]=t=>p.value.name=t),style:{width:"100%"}},null,8,["modelValue"]),ze,l(O,{min:"0",modelValue:p.value.price,"onUpdate:modelValue":o[5]||(o[5]=t=>p.value.price=t),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(g,{visible:E.value,"onUpdate:visible":o[10]||(o[10]=t=>E.value=t),header:"Nuevo grupo de adiciones",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Oe,[l(s,{onClick:o[9]||(o[9]=t=>X()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Re,[e("div",qe,[Le,l(U,{modelValue:C.value.name,"onUpdate:modelValue":o[8]||(o[8]=t=>C.value.name=t),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(g,{visible:h.value,"onUpdate:visible":o[14]||(o[14]=t=>h.value=t),header:"Nuevo adicion",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Ke,[l(s,{onClick:oe,style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Fe,[e("div",He,[Me,l(ie,{modelValue:r.value.type_id,"onUpdate:modelValue":o[11]||(o[11]=t=>r.value.type_id=t),optionLabel:"name",optionValue:"id",options:R.value},null,8,["modelValue","options"]),Pe,l(U,{modelValue:r.value.name,"onUpdate:modelValue":o[12]||(o[12]=t=>r.value.name=t),style:{width:"100%"}},null,8,["modelValue"]),Je,l(O,{modelValue:r.value.price,"onUpdate:modelValue":o[13]||(o[13]=t=>r.value.price=t),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(g,{visible:w.value,"onUpdate:visible":o[17]||(o[17]=t=>w.value=t),header:"Editar grupo",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Ye,[l(s,{onClick:o[16]||(o[16]=t=>Y()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Qe,[e("div",We,[Xe,l(U,{modelValue:f.value.name,"onUpdate:modelValue":o[15]||(o[15]=t=>f.value.name=t),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"])],64)}}},it=se(Ze,[["__scopeId","data-v-2f667715"]]);export{it as default};
