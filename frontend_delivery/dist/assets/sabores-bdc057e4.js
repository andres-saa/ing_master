import{a as L}from"./aditionalService-ba6bda69.js";import{f as re}from"./formatoPesos-2a38d2e7.js";import{_ as ie,u as ne,m as de,b as i,d as ue,p as S,r as m,o as u,c as g,e as l,a as t,F as O,k as pe,w as a,U as c,v as T,q as $,t as V,i as ve,g as D,y as me,z as ce,J as H}from"./index-147646d1.js";import{f as _}from"./fetchService-d0f0c0ab.js";const p=E=>(me("data-v-3fa2b7d1"),E=E(),ce(),E),_e={class:"px-3",style:{}},fe={class:"p-2 mx-auto",style:{"max-width":"540px",overflow:"hidden","background-color":"var(--primary-color)","border-bottom":"2px solid #00000050","border-radius":".5rem .5rem 0 0","box-shadow":"0 1rem 1rem #00000030",gap:"1rem",padding:"0 3rem",margin:"auto",display:"flex","justify-content":"space-between","align-items":"center"}},ye=p(()=>l("p",{class:"text-center pl-3 text-xl p-0 m-0",style:{"font-weight":"bold",width:"min-content",color:"white",gap:"1rem","align-items":"center"}}," SABORES ",-1)),be={style:{display:"flex",gap:".5rem","align-items":"center"}},ge=p(()=>l("h6",{class:"m-0 text-white p-0"},"|",-1)),he={class:"m-auto col-12 m-0 p-0",style:{"max-width":"540px","box-shadow":"0 1rem 1rem #00000030","border-bottom":"2px solid #00000050",overflow:"hidden"}},xe={class:"my-1 px-2",style:{display:"flex","justify-content":"space-between","align-items":"center",gap:"1rem"}},we={key:0,class:"pi pi-angle-up text-2xl"},ke={key:1,class:"pi pi-angle-down text-2xl"},Ce={class:"text-center text-xl m-0",style:{"font-weight":"bold","text-transform":"capitalize"}},$e=p(()=>l("b",null,[l("i",{class:"pi pi-arrow-left"})],-1)),Ve={style:{display:"flex",gap:".5rem","justify-content":"end"}},De={class:"m-0",style:{"text-transform":"uppercase"}},Ee={key:0,class:"m-0",style:{"font-weight":"bold","text-align":"end"}},Ne={style:{display:"flex",gap:".5rem","justify-content":"end"}},Ue={class:"py-3"},Fe={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Ge=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"Nombre")],-1)),Ie=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"precio")],-1)),je={style:{display:"flex","justify-content":"end"}},Se={style:{display:"flex","justify-content":"end"}},Te={style:{display:"flex","justify-content":"end"}},Be={class:"py-3"},Ae={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Re=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"Nombre")],-1)),ze={style:{display:"flex","justify-content":"end"}},Me={class:"py-3"},Pe={style:{display:"flex",gap:"1rem","flex-direction":"column"}},qe=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"Grupo")],-1)),Le=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"Nombre")],-1)),Oe=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"precio")],-1)),He={style:{display:"flex","justify-content":"end"}},Je={class:"py-3"},Ke={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Qe=p(()=>l("h6",{class:"m-0 p-0"},[l("b",null,"Nombre")],-1)),We={style:{display:"flex","justify-content":"end"}},Xe={__name:"sabores",setup(E){const R=ne(),z=de(),h=i(!1),x=i(!1),N=i(!1),U=i(!1),w=i(!1),k=i(!1),B=i({}),A=i({}),J=s=>{B.value={...s},w.value=!0},K=s=>{A.value={...s},k.value=!0},Q=async()=>{try{await _.delete(`${c}/delete_flavor/${B.value.flavor_id}`),y(),w.value=!1}catch(s){console.error("Error eliminando el sabor:",s),alert("Hubo un error eliminando el sabor.")}},W=async()=>{try{await _.delete(`${c}/delete_flavor_group/${A.value.group_id}`),y(),k.value=!1}catch(s){console.error("Error eliminando el grupo:",s),alert("Hubo un error eliminando el grupo.")}},M=i({}),n=i({name:"",price:0,flavor_group_id:null}),C=i({name:""}),F=i({}),f=i({}),v=i({}),X=s=>{v.value={...s},N.value=!0},Y=s=>{f.value={...s},U.value=!0},G=i({}),Z=async()=>{(!n.value.name||!n.value.flavor_group_id)&&alert("Llena los datos obligatorios"),console.log(n.value);const s={name:n.value.name,price:n.value.price||0};await _.post(`${c}/create-flavor/${n.value.flavor_group_id}`,s),y(),h.value=!1},ee=async()=>{C.value.name||alert("No puedes crear un grupo sin nombre"),await _.post(`${c}/create-flavor-grouped`,C.value),y(),x.value=!1},le=async()=>{f.value.group_name||alert("No puedes crear un grupo sin nombre");const s={name:f.value.group_name,id:f.value.group_id};console.log(f.value),await _.post(`${c}/edit-flavor-grouped`,s),y(),U.value=!1},oe=async()=>{v.value.flavor_name||alert("No puedes crear un grupo sin nombre");const s={name:v.value.flavor_name,price:v.value.flavor_price};await _.post(`${c}/edit-flavor/${v.value.flavor_id}`,s),y(),N.value=!1},y=async()=>{G.value=await _.get(`${c}/get-flavor-grouped`),M.value=await _.get(`${c}/get-aditional-category`)};return ue(async()=>{await y()}),S(()=>z.path,async()=>{z.params.category_id&&(G.value=await L.getAllAditions(),await H())},{deep:!0}),S(()=>R.site,async()=>{R.site&&(G.value=await L.getAllAditions(),await H())},{deep:!0}),S(h,()=>{n.value={}}),S(x,()=>{C.value={}}),(s,o)=>{const r=m("Button"),P=m("Tag"),I=m("Column"),te=m("DataTable"),j=m("InputText"),q=m("InputNumber"),b=m("Dialog"),ae=m("Dropdown");return u(),g(O,null,[l("div",_e,[l("div",fe,[ye,l("div",be,[t(r,{onClick:o[0]||(o[0]=e=>h.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nuevo sabor"}),ge,t(r,{onClick:o[1]||(o[1]=e=>x.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nuevo Grupo"})])])]),(u(!0),g(O,null,pe(G.value,e=>(u(),g("div",he,[l("div",xe,[t(r,{onClick:d=>F.value[e.group_id]=!F.value[e.group_id],text:"",style:{color:"var(--primary-color)"}},{default:a(()=>[l("b",null,[F.value[e.group_id]?(u(),g("i",we)):(u(),g("i",ke))])]),_:2},1032,["onClick"]),e.gaseosa?(u(),T(P,{key:0,style:{width:"1rem",height:"1rem","border-radius":"50%"},severity:"success"})):$("",!0),l("h6",Ce,V(e.group_name),1),$e,l("div",Ve,[t(r,{onClick:d=>Y(e),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),e.gaseosa?$("",!0):(u(),T(r,{key:0,onClick:d=>K(e),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:" pi pi-trash"},null,8,["onClick"]))])]),F.value[e.group_id]?(u(),T(te,{key:0,showGridlines:"",stripedRows:"",value:e==null?void 0:e.flavors},{default:a(()=>[t(I,{style:{"text-transform":"capitalize"},class:"p-0 px-2",field:"aditional_item_name",header:"NOMBRE"},{body:a(d=>[l("h6",De,V(d.data.flavor_name),1)]),_:1}),t(I,{class:"p px-2",field:"aditional_item_price",header:"PRECIO",style:{"text-transform":"capitalize",display:"flex","justify-content":"center"}},{body:a(d=>[d.data.flavor_price!=0?(u(),g("h6",Ee,V(ve(re)(d.data.flavor_price)),1)):$("",!0)]),_:1}),t(I,{class:"p-0 py-1 pl-3 px-2",field:"",header:"PREMIUM"},{body:a(d=>[d.data.is_premium?(u(),T(P,{key:0,style:{"border-radius":".2rem"},severity:"success"},{default:a(()=>[D(" Premium")]),_:1})):$("",!0)]),_:1}),t(I,{style:{width:"2rem"},class:"p-0 py-1 pl-3 px-2",header:"Interactuar"},{body:a(d=>[l("div",Ne,[t(r,{onClick:se=>X(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),t(r,{onClick:se=>J(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:" pi pi-trash"},null,8,["onClick"])])]),_:1})]),_:2},1032,["value"])):$("",!0)]))),256)),t(b,{visible:N.value,"onUpdate:visible":o[5]||(o[5]=e=>N.value=e),header:"Editar sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",je,[t(r,{onClick:o[4]||(o[4]=e=>oe()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[l("div",Ue,[l("div",Fe,[Ge,t(j,{modelValue:v.value.flavor_name,"onUpdate:modelValue":o[2]||(o[2]=e=>v.value.flavor_name=e),style:{width:"100%"}},null,8,["modelValue"]),Ie,t(q,{modelValue:v.value.flavor_price,"onUpdate:modelValue":o[3]||(o[3]=e=>v.value.flavor_price=e),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:w.value,"onUpdate:visible":o[7]||(o[7]=e=>w.value=e),header:"Eliminar sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",Se,[t(r,{onClick:o[6]||(o[6]=e=>w.value=!1),label:"Cancelar",class:"p-button-text"}),t(r,{onClick:Q,label:"Eliminar",severity:"danger",style:{"margin-left":"1rem"}})])]),default:a(()=>[l("p",null,[D("¿Estás seguro de que deseas eliminar el sabor "),l("b",null,V(B.value.flavor_name),1),D("?")])]),_:1},8,["visible"]),t(b,{visible:k.value,"onUpdate:visible":o[9]||(o[9]=e=>k.value=e),header:"Eliminar grupo",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",Te,[t(r,{onClick:o[8]||(o[8]=e=>k.value=!1),label:"Cancelar",class:"p-button-text"}),t(r,{onClick:W,label:"Eliminar",severity:"danger",style:{"margin-left":"1rem"}})])]),default:a(()=>[l("p",null,[D("¿Estás seguro de que deseas eliminar el grupo "),l("b",null,V(A.value.group_name),1),D("?")])]),_:1},8,["visible"]),t(b,{visible:x.value,"onUpdate:visible":o[12]||(o[12]=e=>x.value=e),header:"Nuevo grupo de sabores",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",ze,[t(r,{onClick:o[11]||(o[11]=e=>ee()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[l("div",Be,[l("div",Ae,[Re,t(j,{modelValue:C.value.name,"onUpdate:modelValue":o[10]||(o[10]=e=>C.value.name=e),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:h.value,"onUpdate:visible":o[17]||(o[17]=e=>h.value=e),header:"Nuevo sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",He,[t(r,{onClick:o[16]||(o[16]=e=>Z()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[l("div",Me,[l("div",Pe,[qe,t(ae,{modelValue:n.value.flavor_group_id,"onUpdate:modelValue":o[13]||(o[13]=e=>n.value.flavor_group_id=e),optionLabel:"name",optionValue:"id",options:M.value},null,8,["modelValue","options"]),Le,t(j,{modelValue:n.value.name,"onUpdate:modelValue":o[14]||(o[14]=e=>n.value.name=e),style:{width:"100%"}},null,8,["modelValue"]),Oe,t(q,{modelValue:n.value.price,"onUpdate:modelValue":o[15]||(o[15]=e=>n.value.price=e),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:U.value,"onUpdate:visible":o[20]||(o[20]=e=>U.value=e),header:"Editar grupo",modal:"",style:{width:"30rem"}},{footer:a(()=>[l("div",We,[t(r,{onClick:o[19]||(o[19]=e=>le()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[l("div",Je,[l("div",Ke,[Qe,t(j,{modelValue:f.value.group_name,"onUpdate:modelValue":o[18]||(o[18]=e=>f.value.group_name=e),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"])],64)}}},ol=ie(Xe,[["__scopeId","data-v-3fa2b7d1"]]);export{ol as default};
